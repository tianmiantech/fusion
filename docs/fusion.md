## 功能介绍
### 注册登录

首次登录系统时需要初始化，输入用户名和密码，点击**初始化**，成功进入系统首页。
![注册](images/register.png)

已注册的使用账户名和密码即可登录系统。

### 首页

进入系统首页展示如下图：

1. 中部展示**发起任务**按钮；
2. 右侧导航栏展示系统提醒消息页面，点击可查看待处理任务；
3. 设置按钮展示系统全局配置信息，进行[全局配置](#global_config)。

![首页](images/home.png)

### <a name="global_config"></a> 全局配置
进入首页后，点击右上角的**设置**按钮配置对外服务地址，用于与合作方通信：

![全局配置](images/config.png)

配置后，点击**连通性测试**，并**保存**，自动生成配置二维码，**可拍照或保存**发送给发起方，用于发起方创建融合任务时识别合作方信息。

![识别二维码](images/config_code.png)

### <a name="create_job"></a> 发起融合任务
用户进入系统首页后，点击**发起任务**按钮，跳转创建任务页面如下，[上传发起方数据资源](#upload_data)，设置融合主键及其加密方式；

![创建任务](images/job_create.png)

- 算法类型下拉选择，支持RSA（Rivest-Shamir-Adleman）及ECDH（Elliptic Curve Diffie-Hellman）两种数据融合方案。
- 样本类型支持数据集文件及过滤器文件。
- 样本来源支持文件 *（csv，xls，xlsx)* 上传及数据库上传，数据库类型支持 *Mysql，Doris，Hive*。
- 设置融合主键hash方式，支持*md5*和*sha256*两种hash方式对主键进行加密。
- 添加附加字段，融合结果除返回融合主键外，新增融合结果的返回字段。 


### <a name="upload_data"></a> 上传样本

在[创建任务](#create_job)页面，分为三种方式：数据集上传，过滤器文件上传，数据库上传。

使用数据集上传样本如下：

选择文件上传，扫描完成后可设置融合主键hash方式，支持*md5*和*sha256*两种hash方式对主键进行加密。

![数据源上传](images/dataset_upload.png)

使用过滤器文件上传如下：

样本类型选择布隆过滤器，点击**选择布隆过滤器**,选择过滤器文件，自动关联主键及其加密方式:

![过滤器上传](images/bloom_filter_upload.png)
> 这里的过滤器文件来源于当前成员在历史合作融合任务自动生成的过滤器，当两方进行数据融合时，由样本量较大的那一方自动生成过滤器文件。

选择数据库上传样本如下：

![数据库上传](images/database_upload.png)

样本上传完成后并设置融合组件及其加密方式后，点击**保存**按钮。

### <a name="partner"></a> 配置合作方信息

在[创建任务](#create_job)页面，发起方填写样本及融合主键信息，点击**保存**按钮后，展示填写合作方配置信息窗口。

![合作方信息](images/create_job_partner.png)

在协作方窗口，点击**上传合作方二维码自动识别合作方信息**按钮，将合作方发送过来的二维码图片上传后，点击**识别二维码**，识别出合作方的服务信息及公钥填充在对应的输入框内，如下图：

![识别二维码](images/scan_code.png)

另外用户没有合作方的二维码图片时，可以用户手动填写合作方配置信息，如协作方名；协作方服务地址及公钥。

### 发起任务
[合作方信息配置](#partner)完成后，点击**发起任务**按钮，创建融合任务，创建成功后等待合作方进行任务审核。

![发起任务](images/send_job.png)

任务提交后回到首页，展示任务列表如下，状态为审批中。
![审核列表](images/promoter_job_list.png)

### 任务审核
任务发起成功后，合作方会收到一条待处理任务，展示在首页任务列表，且右上角小红点消息提醒，点击展示待处理任务。

![任务审核](images/audit_list.png)

点击主页-列表-**去审批**或消息提醒-待处理任务-**去审批**按钮，进行任务审核。
若合作方**拒绝**，则该任务流程终止，需发起方重新创建任务；若合作方审核通过，需上传数据集并选择融合主键以及主键加密方式，填写完成后，点击**通过并开启任务**按钮，开启数据融合任务。

![合作方审核](images/partner_audit.png)
> 注意：合作方主键加密方式需一致。

### 任务执行
合作方审核任务通过后，任务开始执行，主页展示任务列表，状态为运行中，如下图：

![任务运行](images/job_running.png)

点击详情可见任务信息、多方详情、任务进度。

![任务进度](images/job_process.png)

### 查看融合结果
任务执行成功后，在任务详情页，可预览结果，展示融合字段及附加字段，该预览功能只展示部分融合结果：

![结果预览](images/result_preview.png)

点击下载结果将融合结果下载为csv文件查看。

![结果下载](images/result_download.png)