# 密码字段的加密处理方案

密码的定义：所有需要秘密保存和传输的字段，都属于密码。例如：password、secret_key、account_token 等。

根据安全要求：
1. 密码字段不允许在公网明文传输
2. 密码字段不能传递给前端

<br>

## 密码传递到前端
根据要求，密码不会传递到前端，但为了视觉上区分表单的已填写和未填写两种状态，后台对非空密码字段统一输出给前端若干个星号。

例如：********

后台对此功能进行了封装，只需要对输出实体的字段添加注解，即可实现。

```java
@Secret(maskStrategy = MaskStrategy.PASSWORD)
private String password;
```

## 密码传递到后台

对于存在更新行为的表单，前端应当跟踪表单中的密码字段是否有被修改，这决定前端是否应该传递密码字段。

如果用户未填写/修改密码字段，该字段传递到后台时应指定为 null，这时后台不会更新或储存该字段。

如果用户有填写/修改密码字段，该字段应该在前端进行加密后发送密文。

加密使用 RSA 加密算法，完整的加解密过程如下：

1. 前端通过 `crypto/generate_rsa_key_pair` 接口获取公钥
2. 在前端对用户填写的密码进行加密（一个请求中的多个密码使用同一个公钥加密，不要多次获取公钥。）
3. 后台在接收到密文后会使用相应的私钥对其解密